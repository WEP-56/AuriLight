# KazuVera2D 项目总结

## 🎯 项目概述

KazuVera2D 是一个统一的动漫和漫画观看平台，成功融合了 Kazumi 和 Venera 两个项目的优秀特性。

### 核心设计理念
- **统一规则系统**：支持 Kazumi 的 JSON 规则和 Venera 的 JS 规则
- **热插拔源管理**：侧边栏支持拖拽排序、动态增删规则源
- **现代化界面**：基于 Kazumi 的现代设计风格
- **功能完整性**：保留两个项目的核心功能

## 🏗️ 技术架构

### 主要技术栈
- **Flutter**: 跨平台UI框架
- **MobX**: 响应式状态管理 (来自Kazumi)
- **Hive**: 高性能本地数据库 (来自Kazumi)
- **Flutter Modular**: 模块化架构
- **QuickJS**: JavaScript引擎 (用于Venera规则)

### 项目结构
```
KazuVera2D/
├── lib/
│   ├── core/                    # 核心功能层
│   │   ├── models/             # 数据模型
│   │   ├── rule_engine/        # 统一规则引擎
│   │   ├── storage/            # 存储管理
│   │   └── utils/              # 工具类
│   ├── features/               # 功能模块层
│   │   ├── home/              # 主页模块
│   │   ├── anime/             # 动漫模块
│   │   ├── manga/             # 漫画模块
│   │   ├── favorites/         # 收藏模块
│   │   └── settings/          # 设置模块
│   └── app_*.dart             # 应用入口文件
├── rules/                     # 规则文件目录
│   ├── anime/                 # 动漫规则 (JSON)
│   └── manga/                 # 漫画规则 (JS)
└── scripts/                   # 构建脚本
```

## 🔧 核心功能实现

### 1. 统一规则系统

#### UnifiedRule 模型
- 统一的规则数据结构
- 支持两种文件格式的转换
- 包含搜索、详情、播放等配置

#### RuleParser 解析器
- JSON 规则解析 (Kazumi格式)
- JavaScript 规则解析 (Venera格式)
- 自动格式检测和验证

#### RuleManager 管理器
- 规则文件扫描和加载
- 热重载支持
- 启用/禁用控制
- 拖拽排序功能

### 2. 侧边栏导航系统

#### 热插拔源管理
- 动态规则源列表
- 拖拽重新排序
- 启用/禁用开关
- 分类显示 (动漫/漫画)

#### 导航功能
- 首页、收藏、下载、历史、设置
- 规则源直接访问
- 统计信息显示

### 3. 数据管理系统

#### 收藏系统
- 按类型分组 (动漫/漫画/本地漫画)
- 统一的收藏项模型
- 元数据支持

#### 存储架构
- Hive 本地数据库
- 自动适配器生成
- 高效的数据序列化

## 🎨 UI 设计

### 设计风格
- **主框架**: Kazumi 的现代化设计
- **配色方案**: Material 3 设计语言
- **卡片样式**: 融合 Venera 的网格布局
- **响应式布局**: 适配不同屏幕尺寸

### 组件设计
- 统一的主题系统
- 可复用的UI组件
- 流畅的动画效果
- 无障碍访问支持

## 📋 开发进度

### ✅ 已完成功能
1. **基础架构搭建**
   - 项目结构设计
   - 依赖管理配置
   - 模块化架构

2. **统一规则系统**
   - UnifiedRule 数据模型
   - RuleParser 解析器
   - RuleManager 管理器
   - 示例规则文件

3. **主界面框架**
   - 侧边栏导航
   - 主内容区域
   - 响应式布局
   - 状态管理

4. **数据存储系统**
   - Hive 数据库集成
   - 模型适配器
   - 存储管理器

### 🚧 开发中功能
1. **动漫模块**
   - Kazumi 规则解析引擎
   - 搜索和播放功能
   - 历史记录管理

2. **漫画模块**
   - Venera JS 引擎集成
   - 搜索和阅读功能
   - 下载管理系统

### 📋 待开发功能
1. **高级功能**
   - 收藏系统完善
   - 账户登录支持
   - 设置和配置界面
   - 数据导入导出

2. **优化功能**
   - 性能优化
   - 错误处理
   - 日志系统
   - 自动更新

## 🚀 快速开始

### 环境要求
- Flutter SDK >= 3.10.0
- Dart SDK >= 3.0.0
- Windows 10/11 (当前支持)

### 安装步骤
1. 克隆项目
2. 运行 `scripts/setup.bat` 安装依赖
3. 运行 `scripts/run.bat` 启动应用

### 规则文件
- 动漫规则: 放置在 `rules/anime/` 目录，使用 `.json` 格式
- 漫画规则: 放置在 `rules/manga/` 目录，使用 `.js` 格式

## 🔮 未来规划

### Phase 2: 核心功能完善
- 完整的动漫播放功能
- 完整的漫画阅读功能
- 下载管理系统
- 历史记录同步

### Phase 3: 高级特性
- 多平台支持 (Android, iOS, macOS, Linux)
- 云同步功能
- 插件系统
- 主题定制

### Phase 4: 生态建设
- 规则商店
- 社区功能
- API 开放
- 开发者工具

## 💡 技术亮点

1. **统一规则引擎**: 首次实现了 JSON 和 JS 规则的统一管理
2. **热插拔架构**: 支持运行时动态加载和管理规则源
3. **响应式设计**: 基于 MobX 的高效状态管理
4. **模块化架构**: 清晰的代码组织和功能分离
5. **现代化UI**: Material 3 设计语言的完整实现

## 🤝 贡献指南

欢迎贡献代码、规则文件和功能建议！

### 贡献方式
- 提交 Issue 报告问题
- 提交 Pull Request 贡献代码
- 分享规则文件
- 完善文档

### 开发规范
- 遵循 Flutter 代码规范
- 使用 MobX 进行状态管理
- 编写单元测试
- 更新相关文档

---

**KazuVera2D** - 让动漫和漫画观看更简单、更统一！